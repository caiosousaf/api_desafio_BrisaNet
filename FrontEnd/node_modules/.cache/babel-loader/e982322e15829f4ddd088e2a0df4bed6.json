{"ast":null,"code":"function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport on from 'dom-lib/on';\nimport { useCallback, useRef, useState } from 'react';\nimport AutoScroller from './AutoScroller';\nimport { closestNode, getEdgeOffset, getScrollingParent, isContainInteractiveElement, setInlineStyles, setTransitionDuration, setTranslate3d } from './utils';\nimport { useIsMounted } from '../../utils';\nimport useManager from './useManager';\n\nvar useSortHelper = function useSortHelper(config) {\n  var autoScroll = config.autoScroll,\n      pressDelay = config.pressDelay,\n      transitionDuration = config.transitionDuration,\n      onSort = config.onSort,\n      onSortEnd = config.onSortEnd,\n      onSortMove = config.onSortMove,\n      onSortStart = config.onSortStart;\n\n  var _useState = useState(false),\n      sorting = _useState[0],\n      setSorting = _useState[1];\n\n  var containerRef = useRef(null);\n  var pressTimer = useRef();\n\n  var _useManager = useManager(),\n      listItemRegister = _useManager.listItemRegister,\n      getManagedItem = _useManager.getManagedItem,\n      getOrderedItems = _useManager.getOrderedItems;\n\n  var isMounted = useIsMounted();\n  /**\n   * start dragging\n   * */\n\n  var handlePress = useCallback(function (mouseDownEvent, targetNode, curManagedItem) {\n    var _curManagedItem$info$, _curManagedItem$info$2, _activeNodeHelper;\n\n    if (!isMounted()) return;\n    var listItemBaseClassName = targetNode.classList[0]; // get list item base className\n\n    var helperElementClass = listItemBaseClassName + \"-helper\";\n    var holderElementClass = listItemBaseClassName + \"-holder\"; // data\n\n    var containerElement = containerRef.current;\n    var activeNode = curManagedItem.node;\n    var activeNodeOldIndex = (_curManagedItem$info$ = curManagedItem.info.index) !== null && _curManagedItem$info$ !== void 0 ? _curManagedItem$info$ : 0;\n    var activeNodeNextIndex = (_curManagedItem$info$2 = curManagedItem.info.index) !== null && _curManagedItem$info$2 !== void 0 ? _curManagedItem$info$2 : 0;\n    var activeNodeHolderTranslate = {\n      x: 0,\n      y: 0\n    };\n    var animatedNodesOffset = []; // all list item offset\n    // init scroller\n\n    var scrollContainer = getScrollingParent(containerElement) || containerElement;\n    var initScroll = {\n      x: scrollContainer.scrollLeft,\n      y: scrollContainer.scrollTop\n    };\n    var autoScroller = new AutoScroller(scrollContainer, function (offset) {\n      activeNodeHolderTranslate.x += offset.left;\n      activeNodeHolderTranslate.y += offset.top;\n    });\n    var activeNodeBoundingClientRect = activeNode.getBoundingClientRect();\n    var activeNodeOffsetEdge = getEdgeOffset(activeNode, containerElement);\n    var activeNodeStyle = getComputedStyle(activeNode);\n    var activeNodeHelper = activeNode.cloneNode(true);\n    (_activeNodeHelper = activeNodeHelper) === null || _activeNodeHelper === void 0 ? void 0 : _activeNodeHelper.classList.add(helperElementClass);\n    setInlineStyles(activeNodeHelper, {\n      position: 'fixed',\n      width: activeNodeBoundingClientRect.width + \"px\",\n      height: activeNodeBoundingClientRect.height + \"px\",\n      left: activeNodeBoundingClientRect.left - parseFloat(activeNodeStyle.marginLeft) + \"px\",\n      top: activeNodeBoundingClientRect.top - parseFloat(activeNodeStyle.marginTop) + \"px\"\n    });\n    activeNode.classList.add(holderElementClass);\n    document.body.appendChild(activeNodeHelper);\n\n    var getContainerScrollDelta = function getContainerScrollDelta() {\n      return {\n        left: scrollContainer.scrollLeft - initScroll.x,\n        top: scrollContainer.scrollTop - initScroll.y\n      };\n    };\n\n    var getHolderTranslate = function getHolderTranslate() {\n      return animatedNodesOffset.reduce(function (acc, item) {\n        return {\n          x: acc.x + item.x,\n          y: acc.y + item.y\n        };\n      }, {\n        x: 0,\n        y: 0\n      });\n    };\n\n    var sortMouseMoveListener = on(window, 'mousemove', function (mouseOverEvent) {\n      // Update helper position\n      var offset = {\n        x: (mouseOverEvent === null || mouseOverEvent === void 0 ? void 0 : mouseOverEvent.pageX) || 0,\n        y: (mouseOverEvent === null || mouseOverEvent === void 0 ? void 0 : mouseOverEvent.pageY) || 0\n      };\n      var containerScrollDelta = getContainerScrollDelta();\n      var containerBoundingRect = scrollContainer.getBoundingClientRect();\n      activeNodeHolderTranslate = {\n        x: offset.x - mouseDownEvent.pageX,\n        y: offset.y - mouseDownEvent.pageY\n      };\n\n      if (activeNodeHelper) {\n        setTranslate3d(activeNodeHelper, activeNodeHolderTranslate);\n      } // animate\n\n\n      activeNodeNextIndex = -1;\n      var listItemManagerRefs = getOrderedItems(curManagedItem.info.collection);\n      var aTop = activeNodeOffsetEdge.top || 0;\n      var cTop = containerScrollDelta.top || 0;\n      var sortingOffsetY = aTop + activeNodeHolderTranslate.y + cTop;\n      var activeNodeHeight = parseFloat(activeNodeStyle.height) || 0;\n\n      for (var i = 0, len = listItemManagerRefs.length; i < len; i++) {\n        var _listItemManagerRefs$;\n\n        var currentNode = listItemManagerRefs[i].node;\n        var currentNodeIndex = (_listItemManagerRefs$ = listItemManagerRefs[i].info.index) !== null && _listItemManagerRefs$ !== void 0 ? _listItemManagerRefs$ : 0;\n        var offsetY = activeNodeBoundingClientRect.height > currentNode.offsetHeight ? currentNode.offsetHeight / 2 : activeNodeBoundingClientRect.height / 2;\n        var translate = {\n          x: 0,\n          y: 0\n        }; // If we haven't cached the node's offsetTop / offsetLeft value\n\n        var curEdgeOffset = listItemManagerRefs[i].edgeOffset || getEdgeOffset(currentNode, containerElement);\n        listItemManagerRefs[i].edgeOffset = curEdgeOffset; // Get a reference to the next node\n\n        var prvNode = i > 0 && listItemManagerRefs[i - 1];\n        var nextNode = i < len - 1 && listItemManagerRefs[i + 1]; // Also cache the node's edge offset if needed.\n\n        if (prvNode && !prvNode.edgeOffset) {\n          prvNode.edgeOffset = getEdgeOffset(prvNode.node, containerElement);\n        }\n\n        if (nextNode && !nextNode.edgeOffset) {\n          nextNode.edgeOffset = getEdgeOffset(nextNode.node, containerElement);\n        } // If the node is the one we're currently animating, skip it\n\n\n        if (currentNodeIndex === activeNodeOldIndex) {\n          continue;\n        }\n\n        var curEdgeOffsetTop = curEdgeOffset.top || 0;\n\n        if (prvNode && currentNodeIndex > activeNodeOldIndex && sortingOffsetY + offsetY >= curEdgeOffsetTop) {\n          translate.y = -activeNodeHeight;\n          animatedNodesOffset[currentNodeIndex] = {\n            x: 0,\n            y: currentNode.offsetHeight\n          };\n          activeNodeNextIndex = currentNodeIndex;\n        } else if (nextNode && currentNodeIndex < activeNodeOldIndex && sortingOffsetY <= curEdgeOffsetTop + offsetY) {\n          translate.y = activeNodeHeight;\n          animatedNodesOffset[currentNodeIndex] = {\n            x: 0,\n            y: -currentNode.offsetHeight\n          };\n\n          if (activeNodeNextIndex === -1) {\n            activeNodeNextIndex = currentNodeIndex;\n          }\n        } else {\n          animatedNodesOffset[currentNodeIndex] = {\n            x: 0,\n            y: 0\n          };\n        }\n\n        setTransitionDuration(currentNode, transitionDuration);\n        setTranslate3d(currentNode, translate); // translate holder\n\n        setTranslate3d(activeNode, getHolderTranslate());\n      }\n\n      if (activeNodeNextIndex === -1) {\n        activeNodeNextIndex = activeNodeOldIndex;\n      } // auto scroll\n\n\n      if (autoScroll) {\n        autoScroller.update({\n          width: activeNodeBoundingClientRect.width,\n          height: activeNodeBoundingClientRect.height,\n          translate: activeNodeHolderTranslate,\n          maxTranslate: {\n            x: 0,\n            y: containerBoundingRect.top + containerBoundingRect.height - activeNodeBoundingClientRect.top - activeNodeBoundingClientRect.height / 2\n          },\n          minTranslate: {\n            x: 0,\n            y: containerBoundingRect.top - activeNodeBoundingClientRect.top - activeNodeBoundingClientRect.height / 2\n          }\n        });\n      }\n\n      onSortMove === null || onSortMove === void 0 ? void 0 : onSortMove({\n        collection: curManagedItem.info.collection,\n        node: activeNode,\n        oldIndex: activeNodeOldIndex,\n        newIndex: activeNodeNextIndex\n      }, mouseOverEvent);\n    }, {\n      passive: false\n    });\n    var sortMouseEndListener = on(window, 'mouseup', function (event) {\n      // Remove the event listeners\n      sortMouseMoveListener.off();\n      sortMouseEndListener.off();\n      var holderTranslate = getHolderTranslate();\n      var containerScrollDelta = getContainerScrollDelta();\n\n      if (activeNodeHelper) {\n        setTranslate3d(activeNodeHelper, {\n          x: holderTranslate.x - (containerScrollDelta.left || 0),\n          y: holderTranslate.y - (containerScrollDelta.top || 0)\n        });\n        setTransitionDuration(activeNodeHelper, transitionDuration);\n      } // wait for animation\n\n\n      setTimeout(function () {\n        var _activeNodeHelper2, _activeNodeHelper2$pa;\n\n        if (!isMounted()) return; // Remove the helper from the DOM\n\n        (_activeNodeHelper2 = activeNodeHelper) === null || _activeNodeHelper2 === void 0 ? void 0 : (_activeNodeHelper2$pa = _activeNodeHelper2.parentNode) === null || _activeNodeHelper2$pa === void 0 ? void 0 : _activeNodeHelper2$pa.removeChild(activeNodeHelper);\n        activeNodeHelper = null; // Remove redundant styles\n\n        activeNode.classList.remove(holderElementClass);\n        setTranslate3d(activeNode, null);\n        animatedNodesOffset = [];\n\n        for (var _iterator = _createForOfIteratorHelperLoose(getOrderedItems(curManagedItem.info.collection)), _step; !(_step = _iterator()).done;) {\n          var item = _step.value; // Clear the cached offsetTop / offsetLeft value\n\n          item.edgeOffset = null; // Remove the transforms / transitions\n\n          var el = item.node;\n          setTranslate3d(el, null);\n          setTransitionDuration(el, null);\n        } // Stop autoScroll\n\n\n        autoScroller.clear(); // Update manager state\n\n        setSorting(false); // callbacks\n\n        var callbackPayload = {\n          collection: curManagedItem.info.collection,\n          node: curManagedItem.node,\n          newIndex: activeNodeNextIndex,\n          oldIndex: activeNodeOldIndex\n        };\n        onSortEnd === null || onSortEnd === void 0 ? void 0 : onSortEnd(callbackPayload, event);\n        onSort === null || onSort === void 0 ? void 0 : onSort(callbackPayload, event);\n      }, transitionDuration);\n    }, {\n      passive: false\n    });\n    setSorting(true); // start callback\n\n    onSortStart === null || onSortStart === void 0 ? void 0 : onSortStart({\n      collection: curManagedItem.info.collection,\n      node: activeNode,\n      oldIndex: activeNodeOldIndex,\n      newIndex: activeNodeNextIndex\n    }, mouseDownEvent.nativeEvent);\n  }, [autoScroll, getOrderedItems, isMounted, onSort, onSortEnd, onSortMove, onSortStart, transitionDuration]);\n  /**\n   * Determine whether to start dragging\n   * */\n\n  var handleStart = useCallback(function (mouseDownEvent) {\n    var triggeredNode = mouseDownEvent.target;\n    var targetNode = closestNode(triggeredNode, function (el) {\n      return Boolean(getManagedItem(el));\n    });\n    var curManagedItem = getManagedItem(targetNode);\n\n    if ( // is not secondary button pressed\n    mouseDownEvent.button !== 2 && // is list item\n    Boolean(curManagedItem) && !curManagedItem.info.disabled && // is not sorting\n    !sorting && // is valid node\n    targetNode instanceof HTMLElement && // excludes interactive elements\n    !targetNode.contains(closestNode(triggeredNode, isContainInteractiveElement))) {\n      mouseDownEvent.preventDefault();\n      pressTimer.current = setTimeout(handlePress, pressDelay, mouseDownEvent, targetNode, curManagedItem);\n    }\n  }, [getManagedItem, handlePress, pressDelay, sorting]);\n  /**\n   * Clear timer after drag\n   * */\n\n  var handleEnd = useCallback(function () {\n    return clearTimeout(pressTimer.current);\n  }, []);\n  return {\n    handleStart: handleStart,\n    handleEnd: handleEnd,\n    containerRef: containerRef,\n    sorting: sorting,\n    register: listItemRegister\n  };\n};\n\nexport default useSortHelper;","map":{"version":3,"names":["_createForOfIteratorHelperLoose","o","allowArrayLike","it","Symbol","iterator","call","next","bind","Array","isArray","_unsupportedIterableToArray","length","i","done","value","TypeError","minLen","_arrayLikeToArray","n","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","on","useCallback","useRef","useState","AutoScroller","closestNode","getEdgeOffset","getScrollingParent","isContainInteractiveElement","setInlineStyles","setTransitionDuration","setTranslate3d","useIsMounted","useManager","useSortHelper","config","autoScroll","pressDelay","transitionDuration","onSort","onSortEnd","onSortMove","onSortStart","_useState","sorting","setSorting","containerRef","pressTimer","_useManager","listItemRegister","getManagedItem","getOrderedItems","isMounted","handlePress","mouseDownEvent","targetNode","curManagedItem","_curManagedItem$info$","_curManagedItem$info$2","_activeNodeHelper","listItemBaseClassName","classList","helperElementClass","holderElementClass","containerElement","current","activeNode","node","activeNodeOldIndex","info","index","activeNodeNextIndex","activeNodeHolderTranslate","x","y","animatedNodesOffset","scrollContainer","initScroll","scrollLeft","scrollTop","autoScroller","offset","left","top","activeNodeBoundingClientRect","getBoundingClientRect","activeNodeOffsetEdge","activeNodeStyle","getComputedStyle","activeNodeHelper","cloneNode","add","position","width","height","parseFloat","marginLeft","marginTop","document","body","appendChild","getContainerScrollDelta","getHolderTranslate","reduce","acc","item","sortMouseMoveListener","window","mouseOverEvent","pageX","pageY","containerScrollDelta","containerBoundingRect","listItemManagerRefs","collection","aTop","cTop","sortingOffsetY","activeNodeHeight","_listItemManagerRefs$","currentNode","currentNodeIndex","offsetY","offsetHeight","translate","curEdgeOffset","edgeOffset","prvNode","nextNode","curEdgeOffsetTop","update","maxTranslate","minTranslate","oldIndex","newIndex","passive","sortMouseEndListener","event","off","holderTranslate","setTimeout","_activeNodeHelper2","_activeNodeHelper2$pa","parentNode","removeChild","remove","_iterator","_step","el","clear","callbackPayload","nativeEvent","handleStart","triggeredNode","target","Boolean","button","disabled","HTMLElement","contains","preventDefault","handleEnd","clearTimeout","register"],"sources":["/home/brisa/Documentos/api_desafio_BrisaNet/FrontEnd/node_modules/rsuite/esm/List/helper/useSortHelper.js"],"sourcesContent":["function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport on from 'dom-lib/on';\nimport { useCallback, useRef, useState } from 'react';\nimport AutoScroller from './AutoScroller';\nimport { closestNode, getEdgeOffset, getScrollingParent, isContainInteractiveElement, setInlineStyles, setTransitionDuration, setTranslate3d } from './utils';\nimport { useIsMounted } from '../../utils';\nimport useManager from './useManager';\n\nvar useSortHelper = function useSortHelper(config) {\n  var autoScroll = config.autoScroll,\n      pressDelay = config.pressDelay,\n      transitionDuration = config.transitionDuration,\n      onSort = config.onSort,\n      onSortEnd = config.onSortEnd,\n      onSortMove = config.onSortMove,\n      onSortStart = config.onSortStart;\n\n  var _useState = useState(false),\n      sorting = _useState[0],\n      setSorting = _useState[1];\n\n  var containerRef = useRef(null);\n  var pressTimer = useRef();\n\n  var _useManager = useManager(),\n      listItemRegister = _useManager.listItemRegister,\n      getManagedItem = _useManager.getManagedItem,\n      getOrderedItems = _useManager.getOrderedItems;\n\n  var isMounted = useIsMounted();\n  /**\n   * start dragging\n   * */\n\n  var handlePress = useCallback(function (mouseDownEvent, targetNode, curManagedItem) {\n    var _curManagedItem$info$, _curManagedItem$info$2, _activeNodeHelper;\n\n    if (!isMounted()) return;\n    var listItemBaseClassName = targetNode.classList[0]; // get list item base className\n\n    var helperElementClass = listItemBaseClassName + \"-helper\";\n    var holderElementClass = listItemBaseClassName + \"-holder\"; // data\n\n    var containerElement = containerRef.current;\n    var activeNode = curManagedItem.node;\n    var activeNodeOldIndex = (_curManagedItem$info$ = curManagedItem.info.index) !== null && _curManagedItem$info$ !== void 0 ? _curManagedItem$info$ : 0;\n    var activeNodeNextIndex = (_curManagedItem$info$2 = curManagedItem.info.index) !== null && _curManagedItem$info$2 !== void 0 ? _curManagedItem$info$2 : 0;\n    var activeNodeHolderTranslate = {\n      x: 0,\n      y: 0\n    };\n    var animatedNodesOffset = []; // all list item offset\n    // init scroller\n\n    var scrollContainer = getScrollingParent(containerElement) || containerElement;\n    var initScroll = {\n      x: scrollContainer.scrollLeft,\n      y: scrollContainer.scrollTop\n    };\n    var autoScroller = new AutoScroller(scrollContainer, function (offset) {\n      activeNodeHolderTranslate.x += offset.left;\n      activeNodeHolderTranslate.y += offset.top;\n    });\n    var activeNodeBoundingClientRect = activeNode.getBoundingClientRect();\n    var activeNodeOffsetEdge = getEdgeOffset(activeNode, containerElement);\n    var activeNodeStyle = getComputedStyle(activeNode);\n    var activeNodeHelper = activeNode.cloneNode(true);\n    (_activeNodeHelper = activeNodeHelper) === null || _activeNodeHelper === void 0 ? void 0 : _activeNodeHelper.classList.add(helperElementClass);\n    setInlineStyles(activeNodeHelper, {\n      position: 'fixed',\n      width: activeNodeBoundingClientRect.width + \"px\",\n      height: activeNodeBoundingClientRect.height + \"px\",\n      left: activeNodeBoundingClientRect.left - parseFloat(activeNodeStyle.marginLeft) + \"px\",\n      top: activeNodeBoundingClientRect.top - parseFloat(activeNodeStyle.marginTop) + \"px\"\n    });\n    activeNode.classList.add(holderElementClass);\n    document.body.appendChild(activeNodeHelper);\n\n    var getContainerScrollDelta = function getContainerScrollDelta() {\n      return {\n        left: scrollContainer.scrollLeft - initScroll.x,\n        top: scrollContainer.scrollTop - initScroll.y\n      };\n    };\n\n    var getHolderTranslate = function getHolderTranslate() {\n      return animatedNodesOffset.reduce(function (acc, item) {\n        return {\n          x: acc.x + item.x,\n          y: acc.y + item.y\n        };\n      }, {\n        x: 0,\n        y: 0\n      });\n    };\n\n    var sortMouseMoveListener = on(window, 'mousemove', function (mouseOverEvent) {\n      // Update helper position\n      var offset = {\n        x: (mouseOverEvent === null || mouseOverEvent === void 0 ? void 0 : mouseOverEvent.pageX) || 0,\n        y: (mouseOverEvent === null || mouseOverEvent === void 0 ? void 0 : mouseOverEvent.pageY) || 0\n      };\n      var containerScrollDelta = getContainerScrollDelta();\n      var containerBoundingRect = scrollContainer.getBoundingClientRect();\n      activeNodeHolderTranslate = {\n        x: offset.x - mouseDownEvent.pageX,\n        y: offset.y - mouseDownEvent.pageY\n      };\n\n      if (activeNodeHelper) {\n        setTranslate3d(activeNodeHelper, activeNodeHolderTranslate);\n      } // animate\n\n\n      activeNodeNextIndex = -1;\n      var listItemManagerRefs = getOrderedItems(curManagedItem.info.collection);\n      var aTop = activeNodeOffsetEdge.top || 0;\n      var cTop = containerScrollDelta.top || 0;\n      var sortingOffsetY = aTop + activeNodeHolderTranslate.y + cTop;\n      var activeNodeHeight = parseFloat(activeNodeStyle.height) || 0;\n\n      for (var i = 0, len = listItemManagerRefs.length; i < len; i++) {\n        var _listItemManagerRefs$;\n\n        var currentNode = listItemManagerRefs[i].node;\n        var currentNodeIndex = (_listItemManagerRefs$ = listItemManagerRefs[i].info.index) !== null && _listItemManagerRefs$ !== void 0 ? _listItemManagerRefs$ : 0;\n        var offsetY = activeNodeBoundingClientRect.height > currentNode.offsetHeight ? currentNode.offsetHeight / 2 : activeNodeBoundingClientRect.height / 2;\n        var translate = {\n          x: 0,\n          y: 0\n        }; // If we haven't cached the node's offsetTop / offsetLeft value\n\n        var curEdgeOffset = listItemManagerRefs[i].edgeOffset || getEdgeOffset(currentNode, containerElement);\n        listItemManagerRefs[i].edgeOffset = curEdgeOffset; // Get a reference to the next node\n\n        var prvNode = i > 0 && listItemManagerRefs[i - 1];\n        var nextNode = i < len - 1 && listItemManagerRefs[i + 1]; // Also cache the node's edge offset if needed.\n\n        if (prvNode && !prvNode.edgeOffset) {\n          prvNode.edgeOffset = getEdgeOffset(prvNode.node, containerElement);\n        }\n\n        if (nextNode && !nextNode.edgeOffset) {\n          nextNode.edgeOffset = getEdgeOffset(nextNode.node, containerElement);\n        } // If the node is the one we're currently animating, skip it\n\n\n        if (currentNodeIndex === activeNodeOldIndex) {\n          continue;\n        }\n\n        var curEdgeOffsetTop = curEdgeOffset.top || 0;\n\n        if (prvNode && currentNodeIndex > activeNodeOldIndex && sortingOffsetY + offsetY >= curEdgeOffsetTop) {\n          translate.y = -activeNodeHeight;\n          animatedNodesOffset[currentNodeIndex] = {\n            x: 0,\n            y: currentNode.offsetHeight\n          };\n          activeNodeNextIndex = currentNodeIndex;\n        } else if (nextNode && currentNodeIndex < activeNodeOldIndex && sortingOffsetY <= curEdgeOffsetTop + offsetY) {\n          translate.y = activeNodeHeight;\n          animatedNodesOffset[currentNodeIndex] = {\n            x: 0,\n            y: -currentNode.offsetHeight\n          };\n\n          if (activeNodeNextIndex === -1) {\n            activeNodeNextIndex = currentNodeIndex;\n          }\n        } else {\n          animatedNodesOffset[currentNodeIndex] = {\n            x: 0,\n            y: 0\n          };\n        }\n\n        setTransitionDuration(currentNode, transitionDuration);\n        setTranslate3d(currentNode, translate); // translate holder\n\n        setTranslate3d(activeNode, getHolderTranslate());\n      }\n\n      if (activeNodeNextIndex === -1) {\n        activeNodeNextIndex = activeNodeOldIndex;\n      } // auto scroll\n\n\n      if (autoScroll) {\n        autoScroller.update({\n          width: activeNodeBoundingClientRect.width,\n          height: activeNodeBoundingClientRect.height,\n          translate: activeNodeHolderTranslate,\n          maxTranslate: {\n            x: 0,\n            y: containerBoundingRect.top + containerBoundingRect.height - activeNodeBoundingClientRect.top - activeNodeBoundingClientRect.height / 2\n          },\n          minTranslate: {\n            x: 0,\n            y: containerBoundingRect.top - activeNodeBoundingClientRect.top - activeNodeBoundingClientRect.height / 2\n          }\n        });\n      }\n\n      onSortMove === null || onSortMove === void 0 ? void 0 : onSortMove({\n        collection: curManagedItem.info.collection,\n        node: activeNode,\n        oldIndex: activeNodeOldIndex,\n        newIndex: activeNodeNextIndex\n      }, mouseOverEvent);\n    }, {\n      passive: false\n    });\n    var sortMouseEndListener = on(window, 'mouseup', function (event) {\n      // Remove the event listeners\n      sortMouseMoveListener.off();\n      sortMouseEndListener.off();\n      var holderTranslate = getHolderTranslate();\n      var containerScrollDelta = getContainerScrollDelta();\n\n      if (activeNodeHelper) {\n        setTranslate3d(activeNodeHelper, {\n          x: holderTranslate.x - (containerScrollDelta.left || 0),\n          y: holderTranslate.y - (containerScrollDelta.top || 0)\n        });\n        setTransitionDuration(activeNodeHelper, transitionDuration);\n      } // wait for animation\n\n\n      setTimeout(function () {\n        var _activeNodeHelper2, _activeNodeHelper2$pa;\n\n        if (!isMounted()) return; // Remove the helper from the DOM\n\n        (_activeNodeHelper2 = activeNodeHelper) === null || _activeNodeHelper2 === void 0 ? void 0 : (_activeNodeHelper2$pa = _activeNodeHelper2.parentNode) === null || _activeNodeHelper2$pa === void 0 ? void 0 : _activeNodeHelper2$pa.removeChild(activeNodeHelper);\n        activeNodeHelper = null; // Remove redundant styles\n\n        activeNode.classList.remove(holderElementClass);\n        setTranslate3d(activeNode, null);\n        animatedNodesOffset = [];\n\n        for (var _iterator = _createForOfIteratorHelperLoose(getOrderedItems(curManagedItem.info.collection)), _step; !(_step = _iterator()).done;) {\n          var item = _step.value;\n          // Clear the cached offsetTop / offsetLeft value\n          item.edgeOffset = null; // Remove the transforms / transitions\n\n          var el = item.node;\n          setTranslate3d(el, null);\n          setTransitionDuration(el, null);\n        } // Stop autoScroll\n\n\n        autoScroller.clear(); // Update manager state\n\n        setSorting(false); // callbacks\n\n        var callbackPayload = {\n          collection: curManagedItem.info.collection,\n          node: curManagedItem.node,\n          newIndex: activeNodeNextIndex,\n          oldIndex: activeNodeOldIndex\n        };\n        onSortEnd === null || onSortEnd === void 0 ? void 0 : onSortEnd(callbackPayload, event);\n        onSort === null || onSort === void 0 ? void 0 : onSort(callbackPayload, event);\n      }, transitionDuration);\n    }, {\n      passive: false\n    });\n    setSorting(true); // start callback\n\n    onSortStart === null || onSortStart === void 0 ? void 0 : onSortStart({\n      collection: curManagedItem.info.collection,\n      node: activeNode,\n      oldIndex: activeNodeOldIndex,\n      newIndex: activeNodeNextIndex\n    }, mouseDownEvent.nativeEvent);\n  }, [autoScroll, getOrderedItems, isMounted, onSort, onSortEnd, onSortMove, onSortStart, transitionDuration]);\n  /**\n   * Determine whether to start dragging\n   * */\n\n  var handleStart = useCallback(function (mouseDownEvent) {\n    var triggeredNode = mouseDownEvent.target;\n    var targetNode = closestNode(triggeredNode, function (el) {\n      return Boolean(getManagedItem(el));\n    });\n    var curManagedItem = getManagedItem(targetNode);\n\n    if ( // is not secondary button pressed\n    mouseDownEvent.button !== 2 && // is list item\n    Boolean(curManagedItem) && !curManagedItem.info.disabled && // is not sorting\n    !sorting && // is valid node\n    targetNode instanceof HTMLElement && // excludes interactive elements\n    !targetNode.contains(closestNode(triggeredNode, isContainInteractiveElement))) {\n      mouseDownEvent.preventDefault();\n      pressTimer.current = setTimeout(handlePress, pressDelay, mouseDownEvent, targetNode, curManagedItem);\n    }\n  }, [getManagedItem, handlePress, pressDelay, sorting]);\n  /**\n   * Clear timer after drag\n   * */\n\n  var handleEnd = useCallback(function () {\n    return clearTimeout(pressTimer.current);\n  }, []);\n  return {\n    handleStart: handleStart,\n    handleEnd: handleEnd,\n    containerRef: containerRef,\n    sorting: sorting,\n    register: listItemRegister\n  };\n};\n\nexport default useSortHelper;"],"mappings":"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"},"metadata":{},"sourceType":"module"}